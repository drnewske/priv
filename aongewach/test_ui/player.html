<!DOCTYPE html>
<html>
<head>
    <title>Stream Player</title>
    <meta charset="utf-8">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        .artplayer-app { width: 100%; height: 100%; }
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 999;
            background: rgba(0,0,0,0.5);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
            text-decoration: none;
            font-family: sans-serif;
            transition: background 0.2s;
        }
        .back-btn:hover { background: rgba(0,0,0,0.8); }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>
    <a href="index.html" class="back-btn">‚Üê Back to Schedule</a>
    <div class="artplayer-app"></div>

    <script>
        // Get URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const videoUrl = urlParams.get('url');

        if (videoUrl) {
            var art = new Artplayer({
                container: '.artplayer-app',
                url: videoUrl,
                volume: 0.5,
                isLive: true,
                muted: false,
                autoplay: true,
                pip: true,
                autoSize: true,
                autoMini: true,
                screenshot: true,
                setting: true,
                loop: true,
                flip: true,
                playbackRate: true,
                aspectRatio: true,
                fullscreen: true,
                fullscreenWeb: true,
                subtitleOffset: true,
                miniProgressBar: true,
                mutex: true,
                backdrop: true,
                playsInline: true,
                autoPlayback: true,
                airplay: true,
                theme: '#ffad00',
                lang: navigator.language.toLowerCase(),
                moreVideoAttr: {
                    crossOrigin: 'anonymous',
                },
                customType: {
                    m3u8: function (video, url) {
                        if (Hls.isSupported()) {
                            const hls = new Hls();
                            hls.loadSource(url);
                            hls.attachMedia(video);
                        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                            video.src = url;
                        } else {
                            art.notice.show = 'Does not support playback of m3u8';
                        }
                    },
                },
            });
        } else {
            document.querySelector('.artplayer-app').innerHTML = '<h2 style="color:white;text-align:center;padding-top:20%">No URL provided</h2>';
        }
    </script>
</body>
</html>
